<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SpO2 - IoT Health Dashboard</title>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/styles.css') }}">
    <script src="{{ url_for('static', filename='js/scripts.js') }}" defer></script>
</head>
<body>
    <!-- Menu Toggle Button -->
    <button id="toggleSidebar" class="text-white fixed top-2 left-2 z-30 bg-opal-dark rounded p-2">
        <span>â˜°</span>
    </button>
    <!-- Sidebar -->
    <div id="sidebar" class="text-white">
        <nav>
            <a href="/">Home</a>
            <a href="/temperature">Temperature</a>
            <a href="/spo2" class="bg-opal-light">SpO2</a>
            <a href="/ecg">ECG</a>
        </nav>
    </div>
    <!-- Main Content -->
    <div id="main">
        <h1 class="text-3xl font-bold text-opal-dark">.</h1>
		<h1 class="text-3xl font-bold text-opal-dark">SpO2 Data</h1>
        <div class="mt-4">
            <label for="datePicker" class="text-gray-600">Select Date:</label>
            <input type="date" id="datePicker" value="{{ selected_date or latest_date }}" class="border rounded p-2">
        </div>
        <div class="mt-6 bg-white p-6 rounded-lg shadow-md">
            <h2 class="text-xl font-semibold text-opal-dark">Measurements for {{ selected_date or latest_date }}</h2>
            {% if data %}
                <table class="w-full mt-4">
                    <thead>
                        <tr class="bg-opal-light text-white">
                            <th class="py-2 px-4">Timestamp</th>
                            <th class="py-2 px-4">SpO2 (%)</th>
                        </tr>
                    </thead>
                    <tbody>
                        {% for row in data %}
                            <tr class="border-b">
                                <td class="py-2 px-4">{{ row.timestamp }}</td>
                                <td class="py-2 px-4">{{ row.spo2 }}</td>
                            </tr>
                        {% endfor %}
                    </tbody>
                </table>
            {% else %}
                <p class="text-gray-600 mt-4">No SpO2 data available. Please ensure the sensor is collecting data or select another date.</p>
            {% endif %}
        </div>
    </div>
    <script>
        document.getElementById('datePicker').addEventListener('change', function() {
            window.location.href = '/spo2?date=' + this.value;
        });
    </script>
</body>
</html>